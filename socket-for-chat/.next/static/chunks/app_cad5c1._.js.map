{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Documents/next-exercise-socket-chat-stuff/socket-for-chat/app/register/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ChangeEvent, FormEvent, useEffect, useState } from \"react\";\r\nimport { isThereAnyToken } from \"../services/utils\";\r\n\r\nexport const BASE_API_URL= process.env.NEXT_PUBLIC_BASE_API_URL;\r\n// export const BASE_API_URL= \"http://192.168.88.162:8000\";\r\n\r\nexport default function Page() {\r\n\r\n    const [inputState, setInputState]= useState<Record<string, any>>({username: \"\", pass: \"\", repass: \"\"});\r\n    const [error, setError]= useState({hasErrors: false, message: \"\"});\r\n    const history= useRouter();\r\n\r\n    const handleInputsChange= (event: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n        setInputState({...inputState, [event.currentTarget.name] : event.currentTarget.value});\r\n        setError({hasErrors: false, message: \"\"});\r\n    };\r\n\r\n    const formSubmit= (event: FormEvent<HTMLFormElement>) => {\r\n        event.preventDefault();\r\n        if (inputState.username.trim()=== \"\") {\r\n            setError({\r\n                hasErrors: true,\r\n                message: \"Please enter a correct user name\"\r\n            });\r\n            return;\r\n        }\r\n        if (inputState.pass=== \"\" || (inputState.pass !== inputState.repass)) {\r\n            if (inputState.pass=== \"\") {\r\n                setError({\r\n                    hasErrors: true,\r\n                    message: \"Password field should not be empty\"\r\n                });\r\n            } else {\r\n                setError({\r\n                    hasErrors: true,\r\n                    message: \"Passwords do not match\"\r\n                });\r\n            }\r\n            return;\r\n        }\r\n        console.log(inputState);\r\n\r\n        const responseBody= {\r\n            username: inputState.username,\r\n            password: inputState.pass\r\n        };\r\n        try {\r\n            fetch( BASE_API_URL + '/user/create', {\r\n                method: 'POST',\r\n                headers: {'Content-type': 'application/json'},\r\n                body: JSON.stringify(responseBody)\r\n            }).then(response=> {\r\n                console.log(response);\r\n                return response.json();\r\n            }).then(data=> {\r\n                console.log(data);\r\n                if (data.error) {\r\n                    setError({\r\n                        hasErrors: true,\r\n                        message: \"The user name you chose is already taken. Use another name.\"\r\n                    });\r\n                    return;\r\n                }\r\n                if (data.status=== \"success\") {\r\n                    console.log(\"UserCreation successful\");\r\n                    history.push('/success');\r\n                }\r\n            });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n    \r\n    useEffect(()=> {\r\n        if (isThereAnyToken(localStorage)) {\r\n            history.push('/');\r\n        }\r\n    }, []);\r\n\r\n    return <>\r\n        <div className=\"flex flex-col gap-8\">\r\n            <h1 className=\"text-xl text-center\">Create your account</h1>\r\n            <form onSubmit={formSubmit} className=\"flex flex-col gap-2 my-2\">\r\n                <input type=\"text\" name=\"username\" id=\"username\" onChange={handleInputsChange} value={inputState.username} placeholder=\"Your user name\" />\r\n                <input type=\"password\" name=\"pass\" id=\"pass\" onChange={handleInputsChange} value={inputState.pass} placeholder=\"Your password\" />\r\n                <input type=\"password\" name=\"repass\" id=\"repass\" onChange={handleInputsChange} value={inputState.repass} placeholder=\"Confirm your password\" />\r\n                {error.hasErrors && <p className=\"text-[#f00]\">{error.message}</p>}\r\n                <input type=\"submit\" className=\"px-4 py-1 bg-[#333] text-white hover:bg-[#55f] cursor-pointer\" value={\"Create an account\"} />\r\n            </form>\r\n        </div>\r\n    </>;\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAE2B;;;AAL3B;;;;AAKO,MAAM;AAGE,SAAS;;IAEpB,MAAM,CAAC,YAAY,cAAc,GAAE,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAuB;QAAC,UAAU;QAAI,MAAM;QAAI,QAAQ;IAAE;IACpG,MAAM,CAAC,OAAO,SAAS,GAAE,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAE;QAAC,WAAW;QAAO,SAAS;IAAE;IAChE,MAAM,UAAS,CAAA,GAAA,oQAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,qBAAoB,CAAC;QACvB,cAAc;YAAC,GAAG,UAAU;YAAE,CAAC,MAAM,aAAa,CAAC,IAAI,CAAC,EAAG,MAAM,aAAa,CAAC,KAAK;QAAA;QACpF,SAAS;YAAC,WAAW;YAAO,SAAS;QAAE;IAC3C;IAEA,MAAM,aAAY,CAAC;QACf,MAAM,cAAc;QACpB,IAAI,WAAW,QAAQ,CAAC,IAAI,OAAM,IAAI;YAClC,SAAS;gBACL,WAAW;gBACX,SAAS;YACb;YACA;QACJ;QACA,IAAI,WAAW,IAAI,KAAI,MAAO,WAAW,IAAI,KAAK,WAAW,MAAM,EAAG;YAClE,IAAI,WAAW,IAAI,KAAI,IAAI;gBACvB,SAAS;oBACL,WAAW;oBACX,SAAS;gBACb;YACJ,OAAO;gBACH,SAAS;oBACL,WAAW;oBACX,SAAS;gBACb;YACJ;YACA;QACJ;QACA,QAAQ,GAAG,CAAC;QAEZ,MAAM,eAAc;YAChB,UAAU,WAAW,QAAQ;YAC7B,UAAU,WAAW,IAAI;QAC7B;QACA,IAAI;YACA,MAAO,eAAe,gBAAgB;gBAClC,QAAQ;gBACR,SAAS;oBAAC,gBAAgB;gBAAkB;gBAC5C,MAAM,KAAK,SAAS,CAAC;YACzB,GAAG,IAAI,CAAC,CAAA;gBACJ,QAAQ,GAAG,CAAC;gBACZ,OAAO,SAAS,IAAI;YACxB,GAAG,IAAI,CAAC,CAAA;gBACJ,QAAQ,GAAG,CAAC;gBACZ,IAAI,KAAK,KAAK,EAAE;oBACZ,SAAS;wBACL,WAAW;wBACX,SAAS;oBACb;oBACA;gBACJ;gBACA,IAAI,KAAK,MAAM,KAAI,WAAW;oBAC1B,QAAQ,GAAG,CAAC;oBACZ,QAAQ,IAAI,CAAC;gBACjB;YACJ;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,GAAG,CAAC;QAChB;IACJ;IAEA,CAAA,GAAA,4RAAA,CAAA,YAAS,AAAD;0BAAE;YACN,IAAI,CAAA,GAAA,2HAAA,CAAA,kBAAe,AAAD,EAAE,eAAe;gBAC/B,QAAQ,IAAI,CAAC;YACjB;QACJ;yBAAG,EAAE;IAEL,qBAAO;kBACH,cAAA,4TAAC;YAAI,WAAU;;8BACX,4TAAC;oBAAG,WAAU;8BAAsB;;;;;;8BACpC,4TAAC;oBAAK,UAAU;oBAAY,WAAU;;sCAClC,4TAAC;4BAAM,MAAK;4BAAO,MAAK;4BAAW,IAAG;4BAAW,UAAU;4BAAoB,OAAO,WAAW,QAAQ;4BAAE,aAAY;;;;;;sCACvH,4TAAC;4BAAM,MAAK;4BAAW,MAAK;4BAAO,IAAG;4BAAO,UAAU;4BAAoB,OAAO,WAAW,IAAI;4BAAE,aAAY;;;;;;sCAC/G,4TAAC;4BAAM,MAAK;4BAAW,MAAK;4BAAS,IAAG;4BAAS,UAAU;4BAAoB,OAAO,WAAW,MAAM;4BAAE,aAAY;;;;;;wBACpH,MAAM,SAAS,kBAAI,4TAAC;4BAAE,WAAU;sCAAe,MAAM,OAAO;;;;;;sCAC7D,4TAAC;4BAAM,MAAK;4BAAS,WAAU;4BAAgE,OAAO;;;;;;;;;;;;;;;;;;;AAItH;GArFwB;;QAIL,oQAAA,CAAA,YAAS;;;KAJJ"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Documents/next-exercise-socket-chat-stuff/socket-for-chat/app/services/utils.ts"],"sourcesContent":["import { BASE_API_URL } from \"../register/page\";\r\n\r\n/**\r\n * Checks if refreshToken is inside the local storage of the browser.\r\n * @param {any} localStorage the window.localStorage.\r\n * @returns {boolean}\r\n */\r\nexport function isThereAnyToken (localStorage: any) {\r\n    if (localStorage.getItem(\"refreshToken\")) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n};\r\n\r\n/**\r\n * Return the refreshToken in the local storage if it exists and null if it doesn't.\r\n * @param {any} localStorage\r\n * @returns {string|null}\r\n */\r\nexport const refresh= (localStorage: any) => {\r\n    if (isThereAnyToken(localStorage)) {\r\n        return window.localStorage.getItem('refreshToken');\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n/**\r\n * Return the accessToken in the local storage if it exists and null if it doesn't.\r\n * @param {any} localStorage\r\n * @returns {string|null}\r\n */\r\nexport const access= (localStorage: any) => {\r\n    if (isThereAnyToken(localStorage)) {\r\n        return window.localStorage.getItem('accessToken');\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Check if the user is really logged in by validating the token from an API\r\n * @param {string|null} token \r\n * @returns {boolean}\r\n */\r\nexport const checkToken= async (token: string|null) => {\r\n    if(token=== null) {\r\n        return false;\r\n    }\r\n    try{\r\n        const response= await fetch(BASE_API_URL + '/check-token', {\r\n            method: 'POST',\r\n            headers: {'Content-type': 'application/json'},\r\n            body: JSON.stringify({token: token})\r\n        });\r\n        const data= await response.json();\r\n        console.log(data);\r\n        if(data.success=== true) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    } catch (error){\r\n        console.log(\"Can't fetch shit. Aborting...\");\r\n        console.log(error);\r\n    };\r\n};"],"names":[],"mappings":";;;;;;AAAA;;AAOO,SAAS,gBAAiB,YAAiB;IAC9C,IAAI,aAAa,OAAO,CAAC,iBAAiB;QACtC,OAAO;IACX,OAAO;QACH,OAAO;IACX;AACJ;AAOO,MAAM,UAAS,CAAC;IACnB,IAAI,gBAAgB,eAAe;QAC/B,OAAO,OAAO,YAAY,CAAC,OAAO,CAAC;IACvC,OAAO;QACH,OAAO;IACX;AACJ;AAMO,MAAM,SAAQ,CAAC;IAClB,IAAI,gBAAgB,eAAe;QAC/B,OAAO,OAAO,YAAY,CAAC,OAAO,CAAC;IACvC,OAAO;QACH,OAAO;IACX;AACJ;AAOO,MAAM,aAAY,OAAO;IAC5B,IAAG,UAAS,MAAM;QACd,OAAO;IACX;IACA,IAAG;QACC,MAAM,WAAU,MAAM,MAAM,2HAAA,CAAA,eAAY,GAAG,gBAAgB;YACvD,QAAQ;YACR,SAAS;gBAAC,gBAAgB;YAAkB;YAC5C,MAAM,KAAK,SAAS,CAAC;gBAAC,OAAO;YAAK;QACtC;QACA,MAAM,OAAM,MAAM,SAAS,IAAI;QAC/B,QAAQ,GAAG,CAAC;QACZ,IAAG,KAAK,OAAO,KAAI,MAAM;YACrB,OAAO;QACX,OAAO;YACH,OAAO;QACX;IACJ,EAAE,OAAO,OAAM;QACX,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC;IAChB;;AACJ"}},
    {"offset": {"line": 267, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/ASUS/Documents/next-exercise-socket-chat-stuff/socket-for-chat/app/layout.tsx"],"sourcesContent":["\"use client\";\nimport '@/app/ui/global.css';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useEffect, useState } from 'react';\nimport { isThereAnyToken } from './services/utils';\n\nexport default function RootLayout({\n    children,\n}: {\n    children: React.ReactNode;\n}) {\n    const [userLoggedIn, setUserLoggedIn]= useState<boolean>(false);\n    const pathname= usePathname();\n\n    useEffect(()=> {\n        setUserLoggedIn(isThereAnyToken(window.localStorage));\n    }, [pathname]);\n\n    return (\n        <html lang=\"en\">\n            <body className='h-full min-h-[100vh] flex flex-col'>\n                <div className=\"h-full flex flex-col gap-0 justify-between grow\">\n                    <HeaderBase hasUser={userLoggedIn} />\n                    <div className=\"w-full max-w-[30rem] mx-auto\">\n                        {children}\n                    </div>\n                    <Footer />\n                </div>\n            </body>\n        </html>\n    );\n}\n\nconst HeaderBase= ({hasUser}: {hasUser: boolean})=> {\n    return <header>\n        <div className=\"w-full py-2\">\n            <div className=\"w-[97%] max-w-[63rem] flex justify-between mx-auto\">\n                <Link className=\"text-3 font-semibold\" href={\"/\"}>Basic Logo</Link>\n                <div className=\"flex gap-4\">\n                    {hasUser ?\n                        <>\n                            <Link href={\"/profile\"} className='hover:text-[#55f]'>Profile</Link>\n                            <Link href={\"/logout\"} className='hover:text-[#55f]'>Log out</Link>\n                        </>\n                        :\n                        <>\n                            <Link href={\"/login\"} className='hover:text-[#55f]'>Log in</Link>\n                            <Link href={\"/register\"} className='hover:text-[#55f]'>Register</Link>\n                        </>\n                    }\n                </div>\n            </div>\n        </div>\n    </header>;\n};\n\nconst Footer = () => {\n    return <div className=\"w-full bg-[#333] py-2\">\n        <div className=\"text-white w-[97%] max-w-[63rem] mx-auto flex justify-between\">\n            <Link className=\"text-3 font-semibold\" href={\"/\"}>Basic Logo</Link>\n            <span>Â©{new Date().getFullYear()}</span>\n        </div>\n    </div>\n};\n\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;;AAOe,SAAS,WAAW,EAC/B,QAAQ,EAGX;;IACG,MAAM,CAAC,cAAc,gBAAgB,GAAE,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAW;IACzD,MAAM,WAAU,CAAA,GAAA,oQAAA,CAAA,cAAW,AAAD;IAE1B,CAAA,GAAA,4RAAA,CAAA,YAAS,AAAD;gCAAE;YACN,gBAAgB,CAAA,GAAA,2HAAA,CAAA,kBAAe,AAAD,EAAE,OAAO,YAAY;QACvD;+BAAG;QAAC;KAAS;IAEb,qBACI,4TAAC;QAAK,MAAK;kBACP,cAAA,4TAAC;YAAK,WAAU;sBACZ,cAAA,4TAAC;gBAAI,WAAU;;kCACX,4TAAC;wBAAW,SAAS;;;;;;kCACrB,4TAAC;wBAAI,WAAU;kCACV;;;;;;kCAEL,4TAAC;;;;;;;;;;;;;;;;;;;;;AAKrB;GAzBwB;;QAMJ,oQAAA,CAAA,cAAW;;;KANP;AA2BxB,MAAM,aAAY,CAAC,EAAC,OAAO,EAAqB;IAC5C,qBAAO,4TAAC;kBACJ,cAAA,4TAAC;YAAI,WAAU;sBACX,cAAA,4TAAC;gBAAI,WAAU;;kCACX,4TAAC,8RAAA,CAAA,UAAI;wBAAC,WAAU;wBAAuB,MAAM;kCAAK;;;;;;kCAClD,4TAAC;wBAAI,WAAU;kCACV,wBACG;;8CACI,4TAAC,8RAAA,CAAA,UAAI;oCAAC,MAAM;oCAAY,WAAU;8CAAoB;;;;;;8CACtD,4TAAC,8RAAA,CAAA,UAAI;oCAAC,MAAM;oCAAW,WAAU;8CAAoB;;;;;;;yDAGzD;;8CACI,4TAAC,8RAAA,CAAA,UAAI;oCAAC,MAAM;oCAAU,WAAU;8CAAoB;;;;;;8CACpD,4TAAC,8RAAA,CAAA,UAAI;oCAAC,MAAM;oCAAa,WAAU;8CAAoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOnF;MArBM;AAuBN,MAAM,SAAS;IACX,qBAAO,4TAAC;QAAI,WAAU;kBAClB,cAAA,4TAAC;YAAI,WAAU;;8BACX,4TAAC,8RAAA,CAAA,UAAI;oBAAC,WAAU;oBAAuB,MAAM;8BAAK;;;;;;8BAClD,4TAAC;;wBAAK;wBAAE,IAAI,OAAO,WAAW;;;;;;;;;;;;;;;;;;AAG1C;MAPM"}},
    {"offset": {"line": 479, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}